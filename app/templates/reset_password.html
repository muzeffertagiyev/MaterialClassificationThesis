{% extends 'base.html' %}

{% block title %} - {{current_user.username.title()}}/Reset Password{% endblock %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/authentication.css')}}">

{% endblock %}


{% block content %}
{% if request.endpoint == 'reset_password' %}
  <body class="authentication-section">
{% else %}
  <body>
{% endif %}
    <div class="form-container">
      <div class="wrapper">
        <div class="title">Reset Password</div>
        <form class="authentication-form" action="{{ url_for('reset_password',username=current_user.username) }}" method="POST">
          {{ form.csrf_token }}
                
          {% with messages = get_flashed_messages(with_categories=true) %}
                  {% if messages %}
                      {%for category, message in messages%}
                        <div class="alert alert-{{category}} alert-dismissible fade show" role="alert">
                          <span>{{ message }}</span>
                          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                      {% endfor %}
                  {% endif %}
              {% endwith %}

              {% if form.new_confirm_password.errors %}
                <div class="alert alert-danger mt-2 alert-dismissible fade show" role="alert">
                  <span>{{ form.new_confirm_password.errors[0] }}</span>
                  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                </div>
              {% endif %}

          <div class="row">
            <i class="fas fa-lock"></i>
            {{ form.old_password(placeholder="Enter your old password") }}
          </div>
          <div class="row">
            <i class="fas fa-lock"></i>
            {{ form.new_password(placeholder="Enter your new password") }}
          </div>
          <div class="row">
            <i class="fas fa-lock"></i>
            {{ form.new_confirm_password(placeholder="Confirm your new password") }}
          </div>

          <div class="row button">
            <input type="submit" value="Reset Password">
          </div>

        </form>
      </div>
    </div>
  </body>
{% endblock %}
